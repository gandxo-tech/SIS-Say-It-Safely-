<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>SIS â€“ Mes Messages</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Overlay pour le menu -->
  <div class="menu-overlay" id="menu-overlay"></div>
  
  <!-- Menu hamburger -->
  <div class="menu-container">
    <button class="menu-toggle" aria-expanded="false" aria-label="Ouvrir le menu">
      <span class="bar"></span>
      <span class="bar"></span>
      <span class="bar"></span>
    </button>
    <ul class="menu-links" id="menu-links">
      <li><a href="https://sis-say-it-safely.vercel.app/">ğŸ  Accueil</a></li>
      <li><a href="#" id="shareLink">ğŸ”— Partager mon lien</a></li>
      <li><a href="#" id="logoutLink">ğŸšª DÃ©connexion</a></li>
    </ul>
  </div>

  <!-- Loader de connexion -->
  <div class="auth-loader" id="authLoader">
    <div class="spinner"></div>
    <p>VÃ©rification de votre connexion...</p>
  </div>

  <!-- Container principal -->
  <div class="container" id="mainContainer" style="display:none;">
    
    <!-- En-tÃªte utilisateur style NGL -->
    <div class="user-header">
      <div class="user-avatar" id="userAvatar">
        <span id="avatarInitial">S</span>
      </div>
      <div class="user-info">
        <h1 id="userName">Chargement...</h1>
        <p class="user-pseudo" id="userPseudo">@...</p>
        <button class="share-link-btn" id="shareLinkBtn">
          ğŸ“‹ Copier mon lien SIS
        </button>
      </div>
    </div>

    <!-- Statistiques style NGL -->
    <div class="stats-container">
      <div class="stat-card">
        <div class="stat-icon">ğŸ’Œ</div>
        <div class="stat-number" id="totalMessages">0</div>
        <div class="stat-label">Messages</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">ğŸ”¥</div>
        <div class="stat-number" id="totalReactions">0</div>
        <div class="stat-label">RÃ©actions</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">âœ¨</div>
        <div class="stat-number" id="totalPosts">0</div>
        <div class="stat-label">Posts</div>
      </div>
    </div>

    <!-- Bouton crÃ©er publication -->
    <button class="create-post-btn" id="createPostBtn">
      <span class="btn-icon">âœ¨</span>
      <span>CrÃ©er une publication</span>
    </button>

    <!-- Filtres -->
    <div class="filter-container">
      <button class="filter-btn active" data-filter="all">
        <span>ğŸ“¬</span> Tout
      </button>
      <button class="filter-btn" data-filter="messages">
        <span>ğŸ’Œ</span> Messages
      </button>
      <button class="filter-btn" data-filter="posts">
        <span>âœ¨</span> Posts
      </button>
    </div>

    <!-- Tri -->
    <div class="sort-container">
      <select id="sortSelect" class="sort-select">
        <option value="recent">Plus rÃ©cents</option>
        <option value="oldest">Plus anciens</option>
        <option value="popular">Plus populaires</option>
      </select>
    </div>

    <!-- Liste des messages et publications -->
    <div class="msg-list" id="msgList"></div>

    <!-- Message vide -->
    <div class="empty-state" id="emptyState" style="display:none;">
      <div class="empty-animation">
        <div class="empty-icon">ğŸ“­</div>
        <div class="empty-sparkles">âœ¨</div>
      </div>
      <h3>Aucun message pour le moment</h3>
      <p>Partagez votre lien SIS pour recevoir des messages anonymes !</p>
      <button class="empty-action-btn" id="emptyShareBtn">
        ğŸ“‹ Copier mon lien
      </button>
    </div>
  </div>

  <!-- Modal de crÃ©ation de publication -->
  <div class="modal" id="postModal">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h3>âœ¨ CrÃ©er une publication</h3>
        <button class="modal-close" id="closeModal">&times;</button>
      </div>
      <div class="modal-body">
        <textarea id="postContent" placeholder="Partagez quelque chose avec vos amis..." maxlength="500"></textarea>
        <div class="char-count">
          <span id="charCount">0</span>/500
        </div>
        <div class="post-options">
          <label class="checkbox-label">
            <input type="checkbox" id="allowComments" checked>
            <span class="checkbox-custom"></span>
            <span>Autoriser les commentaires</span>
          </label>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-cancel" id="cancelPost">Annuler</button>
        <button class="btn-publish" id="publishPost">
          <span class="btn-icon">âœ¨</span>
          <span>Publier</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Modal de commentaires -->
  <div class="modal" id="commentsModal">
    <div class="modal-backdrop"></div>
    <div class="modal-content comments-modal">
      <div class="modal-header">
        <h3>ğŸ’¬ Commentaires</h3>
        <button class="modal-close" id="closeCommentsModal">&times;</button>
      </div>
      <div class="modal-body">
        <div class="comments-list" id="commentsList">
          <div class="comments-loading">
            <div class="spinner-small"></div>
            <p>Chargement...</p>
          </div>
        </div>
      </div>
      <div class="comment-input-wrapper">
        <input type="text" id="commentInput" placeholder="Ajouter un commentaire..." maxlength="200">
        <button id="sendCommentBtn">
          <span>Envoyer</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Toast notifications -->
  <div class="toast-container" id="toastContainer"></div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script type="module" src="script.js"></script>
</body>
</html